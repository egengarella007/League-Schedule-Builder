"use strict";(()=>{var e={};e.id=427,e.ids=[427],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8703:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>p,originalPathname:()=>_,requestAsyncStorage:()=>d,routeModule:()=>u,serverHooks:()=>l,staticGenerationAsyncStorage:()=>c,staticGenerationBailout:()=>m});var a={};r.r(a),r.d(a,{GET:()=>GET,POST:()=>POST});var o=r(884),s=r(6132),n=r(5798),i=r(7912);async function POST(e){try{let t=await e.json(),{fileName:r,excelData:a,emlThresholds:o,summary:s}=t,u=await i._.importedData.create({data:{fileName:r,totalRows:a.length,startDate:s.startDate,endDate:s.endDate,earlyCount:s.earlyCount,midCount:s.midCount,lateCount:s.lateCount,emlThresholds:o,slots:{create:a.map((e,t)=>({type:e[0]||null,eventStart:e[1]||"",eventEnd:e[2]||"",resource:e[3]||"",emlCategory:e[4]||"Unknown",rowIndex:t}))}},include:{slots:{orderBy:{rowIndex:"asc"}}}});return n.Z.json({success:!0,data:u})}catch(e){return console.error("Error saving import data:",e),n.Z.json({success:!1,error:"Failed to save import data"},{status:500})}}async function GET(){try{let e=await i._.importedData.findFirst({orderBy:{uploadedAt:"desc"},include:{slots:{orderBy:{rowIndex:"asc"}}}});return n.Z.json({success:!0,data:e})}catch(e){return console.error("Error fetching import data:",e),n.Z.json({success:!1,error:"Failed to fetch import data"},{status:500})}}let u=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/import/route",pathname:"/api/import",filename:"route",bundlePath:"app/api/import/route"},resolvedPagePath:"/Users/egengarella/Scheduler/app/api/import/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:d,staticGenerationAsyncStorage:c,serverHooks:l,headerHooks:p,staticGenerationBailout:m}=u,_="/api/import/route"},7912:(e,t,r)=>{r.d(t,{_:()=>s});let a=require("@prisma/client"),o=globalThis,s=o.prisma??new a.PrismaClient}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[997],()=>__webpack_exec__(8703));module.exports=r})();