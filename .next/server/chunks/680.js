"use strict";exports.id=680,exports.ids=[680],exports.modules={2660:(e,r,a)=>{a.d(r,{d:()=>getLatestParamsAction,K:()=>saveParamsAction});var s=a(4600);a(1639);var t=a(4556);let o="00000000-0000-0000-0000-000000000001";var n=a(2990);let l=process.env.SUPABASE_SERVICE_ROLE_KEY,c=null;async function saveParamsAction(e){if(!c)throw Error("SUPABASE_SERVICE_ROLE_KEY is not configured");try{console.log("\uD83D\uDD27 Attempting to save parameters with service role..."),console.log("\uD83D\uDD27 League ID:",o),console.log("\uD83D\uDD27 Parsed params:",JSON.stringify(e,null,2));let{data:r,error:a}=await c.from("scheduler_params").insert({league_id:o,name:"Latest Parameters",params:e}).select().single();if(a)throw console.error("❌ Service role insert failed:",a),Error(`Failed to save parameters: ${a.message}`);return console.log("✅ Parameters saved successfully with service role"),{success:!0,data:r}}catch(e){throw console.error("❌ Error saving parameters:",e),e}}async function getLatestParamsAction(){if(!c)return console.warn("SUPABASE_SERVICE_ROLE_KEY not configured, returning null"),null;try{let{data:e,error:r}=await c.from("scheduler_params").select("*").eq("league_id",o).order("created_at",{ascending:!1}).limit(1).single();if(r)return console.error("Error fetching latest parameters:",r),null;return e?.params||null}catch(e){return console.error("Error in getLatestParamsAction:",e),null}}l&&(c=(0,t.eI)("https://zcoupiuradompbrsebdp.supabase.co",l)),(0,n.h)([saveParamsAction,getLatestParamsAction]),(0,s.U)("dd2c70a84aa89ba8ed3da2899c406cd967ab70da",null,saveParamsAction),(0,s.U)("11210b27565981870a32b24fd672ec96cf203436",null,getLatestParamsAction)}};